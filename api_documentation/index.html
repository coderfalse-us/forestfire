
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../python_formatters/">
      
      
        <link rel="next" href="../python_logging/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.13">
    
    
      
        <title>API - Forestfire</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-integration-in-forestfire" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Forestfire" class="md-header__button md-logo" aria-label="Forestfire" data-md-component="logo">
      
  <img src="../assets/forestf.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Forestfire
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.04 7 9.54s-2.94 8.27-7 9.54c.95.3 1.95.46 3 .46a10 10 0 0 0 10-10A10 10 0 0 0 9 2"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/coderfalse-us/forestfire.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Forestfire" class="md-nav__button md-logo" aria-label="Forestfire" data-md-component="logo">
      
  <img src="../assets/forestf.png" alt="logo">

    </a>
    Forestfire
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/coderfalse-us/forestfire.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../home/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../package_managers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Package Manager
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../python_formatters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Formatter
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-components-overview" class="md-nav__link">
    <span class="md-ellipsis">
      API Components Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Components Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-http-client-httpx" class="md-nav__link">
    <span class="md-ellipsis">
      1. HTTP Client: HTTPX
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. HTTP Client: HTTPX">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features-of-httpx" class="md-nav__link">
    <span class="md-ellipsis">
      Key Features of HTTPX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-in-forestfire" class="md-nav__link">
    <span class="md-ellipsis">
      Usage in ForestFire
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-api-models-with-pydantic" class="md-nav__link">
    <span class="md-ellipsis">
      2. API Models with Pydantic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. API Models with Pydantic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-api-models" class="md-nav__link">
    <span class="md-ellipsis">
      Key API Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-model-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Example Model Definition
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-api-integration-service" class="md-nav__link">
    <span class="md-ellipsis">
      3. API Integration Service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. API Integration Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Key Methods
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-endpoint-details" class="md-nav__link">
    <span class="md-ellipsis">
      API Endpoint Details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Endpoint Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#batch-assign-api" class="md-nav__link">
    <span class="md-ellipsis">
      Batch Assign API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-and-security" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication and Security
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication and Security">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-key-management" class="md-nav__link">
    <span class="md-ellipsis">
      API Key Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssl-verification" class="md-nav__link">
    <span class="md-ellipsis">
      SSL Verification
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#error-types-handled" class="md-nav__link">
    <span class="md-ellipsis">
      Error Types Handled
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-and-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Logging and Monitoring
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-api-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Testing API Integration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-improvements" class="md-nav__link">
    <span class="md-ellipsis">
      Future Improvements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../python_logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logger
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../orm_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ORM
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing_libraries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing Libraries
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../bdd_testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BDD Testing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mkdocs
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-components-overview" class="md-nav__link">
    <span class="md-ellipsis">
      API Components Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Components Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-http-client-httpx" class="md-nav__link">
    <span class="md-ellipsis">
      1. HTTP Client: HTTPX
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. HTTP Client: HTTPX">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features-of-httpx" class="md-nav__link">
    <span class="md-ellipsis">
      Key Features of HTTPX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-in-forestfire" class="md-nav__link">
    <span class="md-ellipsis">
      Usage in ForestFire
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-api-models-with-pydantic" class="md-nav__link">
    <span class="md-ellipsis">
      2. API Models with Pydantic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. API Models with Pydantic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-api-models" class="md-nav__link">
    <span class="md-ellipsis">
      Key API Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-model-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Example Model Definition
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-api-integration-service" class="md-nav__link">
    <span class="md-ellipsis">
      3. API Integration Service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. API Integration Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Key Methods
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-endpoint-details" class="md-nav__link">
    <span class="md-ellipsis">
      API Endpoint Details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Endpoint Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#batch-assign-api" class="md-nav__link">
    <span class="md-ellipsis">
      Batch Assign API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-and-security" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication and Security
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication and Security">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-key-management" class="md-nav__link">
    <span class="md-ellipsis">
      API Key Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssl-verification" class="md-nav__link">
    <span class="md-ellipsis">
      SSL Verification
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#error-types-handled" class="md-nav__link">
    <span class="md-ellipsis">
      Error Types Handled
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-and-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Logging and Monitoring
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-api-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Testing API Integration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-improvements" class="md-nav__link">
    <span class="md-ellipsis">
      Future Improvements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-integration-in-forestfire">API Integration in ForestFire</h1>
<h2 id="introduction">Introduction</h2>
<p>This document provides a comprehensive overview of the API-related components used in the ForestFire project. The project integrates with external APIs to update pick sequences in the warehouse management system after optimization. This documentation covers the HTTP client, request/response models, authentication, error handling, and best practices.</p>
<h2 id="api-components-overview">API Components Overview</h2>
<h3 id="1-http-client-httpx">1. HTTP Client: HTTPX</h3>
<p>ForestFire uses <strong>HTTPX</strong>, a modern, fully featured HTTP client for Python that supports both synchronous and asynchronous APIs. HTTPX is used to make API calls to the warehouse management system.</p>
<h4 id="key-features-of-httpx">Key Features of HTTPX</h4>
<ul>
<li><strong>Async Support</strong>: Native support for <code>async</code>/<code>await</code> syntax</li>
<li><strong>HTTP/2 Support</strong>: Modern HTTP protocol support</li>
<li><strong>Timeout Configuration</strong>: Configurable timeouts for requests</li>
<li><strong>SSL Verification</strong>: Options for SSL certificate verification</li>
<li><strong>Streaming Responses</strong>: Support for streaming responses</li>
<li><strong>Session Management</strong>: Client session management</li>
</ul>
<h4 id="usage-in-forestfire">Usage in ForestFire</h4>
<p>HTTPX is primarily used in the <code>BatchPickSequenceService</code> class to send optimized pick sequences to the external API:</p>
<pre><code class="language-python">async with httpx.AsyncClient(verify=False) as client:
    response = await client.put(
        self.api_url,
        json=payload.model_dump(),
        headers={
            &quot;Authorization&quot;: f&quot;Bearer {self.api_key}&quot;,
            &quot;Content-Type&quot;: &quot;application/json&quot;,
            &quot;App-User-Id&quot;: &quot;Forestfire&quot;,
            # Additional headers...
        },
        timeout=30.0,
    )
</code></pre>
<h3 id="2-api-models-with-pydantic">2. API Models with Pydantic</h3>
<p>ForestFire uses <strong>Pydantic</strong> to define structured data models for API requests and responses. Pydantic provides data validation, serialization, and documentation capabilities.</p>
<h4 id="key-api-models">Key API Models</h4>
<ol>
<li>
<p><strong>PickSequenceUpdate</strong></p>
<ul>
<li>Represents a single pick sequence update</li>
<li>Contains information about picklist, batch, sequence, and identifiers</li>
</ul>
</li>
<li>
<p><strong>PickTaskPayload</strong></p>
<ul>
<li>Represents a pick task in the API payload</li>
<li>Contains task ID, user assignment, batch, and picklists</li>
</ul>
</li>
<li>
<p><strong>PickListPayload</strong></p>
<ul>
<li>Represents a picklist in the API payload</li>
<li>Contains picklist ID, sequence, and test information</li>
</ul>
</li>
<li>
<p><strong>ApiPayload</strong></p>
<ul>
<li>Top-level API payload model</li>
<li>Contains account, business unit, warehouse, and pick tasks</li>
</ul>
</li>
</ol>
<h4 id="example-model-definition">Example Model Definition</h4>
<pre><code class="language-python">class PickSequenceUpdate(BaseModel):
    &quot;&quot;&quot;Model representing a pick sequence update&quot;&quot;&quot;

    picklist_id: str = Field(..., description=&quot;Unique id for picklist&quot;)
    batch_id: str = Field(..., description=&quot;Batch identifier&quot;)
    pick_sequence: int = Field(
        ..., ge=1, description=&quot;Sequence number for picking&quot;
    )
    picktask_id: str = Field(..., description=&quot;Pick task identifier&quot;)
    account_id: str = Field(..., description=&quot;Account identifier&quot;)
    business_unit_id: str = Field(..., description=&quot;Business unit identifier&quot;)
    warehouse_id: str = Field(..., description=&quot;Warehouse identifier&quot;)

    class Config:
        frozen = True
</code></pre>
<h3 id="3-api-integration-service">3. API Integration Service</h3>
<p>The <code>BatchPickSequenceService</code> class serves as the main API integration service, responsible for:</p>
<ol>
<li>Transforming optimization results into API-compatible formats</li>
<li>Constructing API payloads</li>
<li>Sending requests to the external API</li>
<li>Handling responses and errors</li>
</ol>
<h4 id="key-methods">Key Methods</h4>
<ul>
<li><strong><code>transform_updates_to_api_payload</code></strong>: Transforms internal update models to API payload format</li>
<li><strong><code>send_sequence_update</code></strong>: Sends the updates to the external API</li>
<li><strong><code>update_pick_sequences</code></strong>: Orchestrates the entire process from optimization results to API updates</li>
</ul>
<h2 id="api-endpoint-details">API Endpoint Details</h2>
<h3 id="batch-assign-api">Batch Assign API</h3>
<p><strong>Endpoint</strong>: <code>https://picking-example.com/2025-18/api/picking/task/batchassign</code></p>
<p><strong>Method</strong>: PUT</p>
<p><strong>Purpose</strong>: Updates pick sequences for batches in the warehouse management system</p>
<p><strong>Authentication</strong>: Bearer token authentication</p>
<p><strong>Headers</strong>:
- <code>Authorization</code>: Bearer token
- <code>Content-Type</code>: application/json
- <code>App-User-Id</code>: Application identifier
- <code>App-Environment</code>: Environment identifier
- <code>App-Account-id</code>: Account identifier
- <code>App-BU-Id</code>: Business unit identifier
- <code>App-WareHouse-Id</code>: Warehouse identifier</p>
<p><strong>Request Payload Structure</strong>:</p>
<pre><code class="language-json">{
  &quot;AccountId&quot;: &quot;ACC123&quot;,
  &quot;BusinessunitId&quot;: &quot;BU123&quot;,
  &quot;WarehouseId&quot;: &quot;WH123&quot;,
  &quot;PickTasks&quot;: [
    {
      &quot;TaskId&quot;: &quot;TASK123&quot;,
      &quot;UserAssigned&quot;: &quot;BOB&quot;,
      &quot;Batch&quot;: &quot;BATCH_0&quot;,
      &quot;AdditionalProperties&quot;: {},
      &quot;PickLists&quot;: [
        {
          &quot;PickListId&quot;: &quot;PL123&quot;,
          &quot;Sequence&quot;: 1,
          &quot;Test&quot;: &quot;PF03&quot;
        }
      ]
    }
  ]
}
</code></pre>
<h2 id="authentication-and-security">Authentication and Security</h2>
<h3 id="api-key-management">API Key Management</h3>
<p>ForestFire uses a bearer token for API authentication:</p>
<pre><code class="language-python">self.api_key = &quot;***&quot;
</code></pre>
<h3 id="ssl-verification">SSL Verification</h3>
<p>The current implementation disables SSL verification for development purposes:</p>
<pre><code class="language-python">async with httpx.AsyncClient(verify=False) as client:
    # API request code
</code></pre>
<h2 id="error-handling">Error Handling</h2>
<p>ForestFire implements comprehensive error handling for API requests:</p>
<pre><code class="language-python">try:
    response = await client.put(...)
    response.raise_for_status()
    logger.info(&quot;Successfully sent updates to Domain for account %s&quot;, payload.AccountId)
except httpx.RequestError as e:
    logger.error(&quot;API request failed: %s&quot;, e)
    raise
except httpx.HTTPStatusError as e:
    logger.error(
        &quot;API returned error status: %s, Response: %s&quot;,
        e,
        e.response.text if hasattr(e, &quot;response&quot;) else &quot;No response&quot;,
    )
    raise
except Exception as e:
    logger.error(&quot;Error sending updates: %s&quot;, e)
    raise
</code></pre>
<h3 id="error-types-handled">Error Types Handled</h3>
<ol>
<li><strong>RequestError</strong>: Network-related errors (connection failures, timeouts)</li>
<li><strong>HTTPStatusError</strong>: HTTP status errors (4xx, 5xx responses)</li>
<li><strong>General Exceptions</strong>: Any other unexpected errors</li>
</ol>
<h2 id="logging-and-monitoring">Logging and Monitoring</h2>
<p>ForestFire implements detailed logging for API operations:</p>
<pre><code class="language-python">logger.info(&quot;Sending API request with payload: %s&quot;, payload.model_dump())
response = await client.put(...)
logger.info(&quot;API response status: %s&quot;, response.status_code)
</code></pre>
<h2 id="testing-api-integration">Testing API Integration</h2>
<p>The ForestFire project includes tests for API integration using mocking:</p>
<pre><code class="language-python">@pytest.mark.asyncio
async def test_send_sequence_update(self):
    # Arrange
    service = BatchPickSequenceService()
    updates = [MagicMock()]
    mock_api_data = [{&quot;key&quot;: &quot;value&quot;}]

    # Mock the transform method
    with patch.object(service, &quot;transform_updates_to_api_payload&quot;) as mock_transform, \
         patch(&quot;httpx.AsyncClient.put&quot;) as mock_put:
        mock_transform.return_value = mock_api_data

        # Mock the httpx response
        mock_response = MagicMock()
        mock_response.raise_for_status = MagicMock()
        mock_put.return_value = mock_response

        # Act
        await service.send_sequence_update(updates)

        # Assert
        mock_transform.assert_called_once_with(updates)
        mock_put.assert_called_once()
</code></pre>
<h2 id="future-improvements">Future Improvements</h2>
<ol>
<li><strong>API Key Management</strong>: Move API keys to environment variables or a secure vault</li>
<li><strong>Retry Mechanism</strong>: Implement exponential backoff for failed requests</li>
<li><strong>Circuit Breaker</strong>: Add circuit breaker pattern for API resilience</li>
<li><strong>API Versioning</strong>: Support multiple API versions</li>
<li><strong>Response Caching</strong>: Implement caching for appropriate endpoints</li>
<li><strong>Metrics Collection</strong>: Add metrics for API performance monitoring</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>The ForestFire project implements a robust API integration using modern Python libraries like HTTPX and Pydantic. The implementation follows good practices for error handling, logging, and data validation. Future improvements could focus on security, resilience, and performance optimization.</p>
<p>By following the patterns and practices outlined in this documentation, developers can maintain and extend the API integration capabilities of the ForestFire project effectively.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>